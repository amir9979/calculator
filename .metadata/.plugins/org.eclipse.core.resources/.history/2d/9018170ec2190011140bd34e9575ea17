package calculations.dev.parseservice;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Map;

import org.ebayopensource.turmeric.runtime.common.exceptions.ServiceException;

import calculations.dev.ParseRequest;
import calculations.dev.ParseResponse;
import calculations.dev.parseservice.gen.SharedParseServiceConsumer;
import dev.log.trace.MySQLConnector;
import dev.log.trace.SpectrumBasedFaultLocalization;

public class ParseServiceConsumer extends SharedParseServiceConsumer {

	public ParseServiceConsumer(String clientName) throws ServiceException {
		super(clientName);
		// TODO Auto-generated constructor stub
	}
	
	public static int parse(String x) throws ServiceException {
		ParseServiceConsumer consumer = new ParseServiceConsumer("ParseServiceConsumer");
		ParseRequest request = new ParseRequest();
		request.setInput(x);
		ParseResponse response = consumer.parse(request);
		return response.getOutput();
	}
	
	public static void main(String[] args) throws ServiceException, IOException {
		/**
		 * Enter the testcases!
		 */
		MySQLConnector connector = new MySQLConnector(SpectrumBasedFaultLocalization.DATABASE_NAME);
		if(parse("-3^3") == -27){
			Map results = connector.select(String.format("SELECT process_id FROM %s WHERE id = MAX(id);"));
			long process_id = results.get(0).
			connector.update("INSERT INTO %s VALUES (0,'%s',%s);",SpectrumBasedFaultLocalization.DATABASE_NAME,
		}
		if(parse("3+3") == 6){
			
		}
		if(parse("-3*9") == -27){
			
		}
		if(parse("-3*-5") == 15){
			
		}
		if(parse("3*10") == 30){
			
		}
		SpectrumBasedFaultLocalization.createMetrics();
	}

}
