package dev.log.trace;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class TraceStatePoint {

	String process_id;
	String interface_id;
	String service_id;
	String sequence_id;
	
	public TraceStatePoint(String process_id, String interface_id, String service_id, String sequence_id) {
		this.process_id = process_id;
		this.interface_id = interface_id;
		this.service_id = service_id;
		this.sequence_id = sequence_id;
	}
	
	public void logToFile() {
		try {
			FileWriter writer = new FileWriter(new File("trace_log.txt"),true);
			PrintWriter out = new PrintWriter(writer);
			out.println(String.format("{\"process_id\":\"%s\",\"interface_id\":\"%s\",\"service_id\":\"%s\",\"sequence_id\":\"%s\"}",
					process_id,interface_id,service_id,sequence_id));
			out.flush();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	public static String getSequenceId(String request) {
		// TODO Auto-generated method stub
		try {
			FileReader reader = new FileReader("trace_sequence_"+request+".txt");
			char[] counter = new char[10];
			reader.read(counter);
			return counter.toString();
		} catch (FileNotFoundException e){
			return "0";
		} catch (IOException e) {
			// TODO Auto-generated catch block
			return "0";
		}
	}
}
